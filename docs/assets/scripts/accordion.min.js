"use strict";!function(e){function s(i,o){var e=this,r=this,t=!1;if(Array.isArray(i))return!!i.length&&i.map(function(e){return new s(e,o)});var a={init:function(){var n=this;this.options=Object.assign({duration:600,ariaEnabled:!0,collapse:!0,showMultiple:!1,openOnInit:[],elementClass:"ac",triggerClass:"ac-trigger",panelClass:"ac-panel",activeClass:"is-active",beforeOpen:function(){},onOpen:function(){},beforeClose:function(){},onClose:function(){}},o);var e=this.options,t=e.elementClass,s=e.openOnInit;this.container="string"==typeof i?document.querySelector(i):i,this.elements=Array.from(this.container.querySelectorAll(".".concat(t))),this.firstElement=this.elements[0],this.lastElement=this.elements[this.elements.length-1],this.currFocusedIdx=0,this.elements.map(function(e,t){return e.classList.add("js-enabled"),n.generateIDs(e),n.setARIA(e),n.setTransition(e),l++,s.includes(t)?n.showElement(e,!1):n.closeElement(e,!1)}),r.attachEvents()},setTransition:function(e,t){var n=1<arguments.length&&void 0!==t&&t,s=this.options,t=s.duration,s=s.panelClass,e=e.querySelector(".".concat(s)),s=c("transitionDuration");e.style[s]=n?null:"".concat(t,"ms")},generateIDs:function(e){var t=this.options,n=t.triggerClass,t=t.panelClass,n=e.querySelector(".".concat(n)),t=e.querySelector(".".concat(t));e.setAttribute("id","ac-".concat(l)),n.setAttribute("id","ac-trigger-".concat(l)),t.setAttribute("id","ac-panel-".concat(l))},removeIDs:function(e){var t=this.options,n=t.triggerClass,t=t.panelClass,n=e.querySelector(".".concat(n)),t=e.querySelector(".".concat(t));e.removeAttribute("id"),n.removeAttribute("id"),t.removeAttribute("id")},setARIA:function(e){var t=this.options,n=t.ariaEnabled,s=t.triggerClass,t=t.panelClass;n&&(s=e.querySelector(".".concat(s)),t=e.querySelector(".".concat(t)),s.setAttribute("role","button"),s.setAttribute("aria-controls","ac-panel-".concat(l)),s.setAttribute("aria-disabled",!1),s.setAttribute("aria-expanded",!1),t.setAttribute("role","region"),t.setAttribute("aria-labelledby","ac-trigger-".concat(l)))},updateARIA:function(e,t){var n=t.ariaExpanded,s=t.ariaDisabled,i=this.options,t=i.ariaEnabled,i=i.triggerClass;t&&((i=e.querySelector(".".concat(i))).setAttribute("aria-expanded",n),i.setAttribute("aria-disabled",s))},removeARIA:function(e){var t=this.options,n=t.ariaEnabled,s=t.triggerClass,t=t.panelClass;n&&(s=e.querySelector(".".concat(s)),t=e.querySelector(".".concat(t)),s.removeAttribute("role"),s.removeAttribute("aria-controls"),s.removeAttribute("aria-disabled"),s.removeAttribute("aria-expanded"),t.removeAttribute("role"),t.removeAttribute("aria-labelledby"))},focus:function(e,t){e.preventDefault();e=this.options.triggerClass;t.querySelector(".".concat(e)).focus()},focusFirstElement:function(e){this.focus(e,this.firstElement),this.currFocusedIdx=0},focusLastElement:function(e){this.focus(e,this.lastElement),this.currFocusedIdx=this.elements.length-1},focusNextElement:function(e){var t=this.currFocusedIdx+1;if(t>this.elements.length-1)return this.focusFirstElement(e);this.focus(e,this.elements[t]),this.currFocusedIdx=t},focusPrevElement:function(e){var t=this.currFocusedIdx-1;if(t<0)return this.focusLastElement(e);this.focus(e,this.elements[t]),this.currFocusedIdx=t},showElement:function(e,t){var n=!(1<arguments.length&&void 0!==t)||t,s=this.options,i=s.panelClass,o=s.activeClass,t=s.collapse,s=s.beforeOpen,r=e.querySelector(".".concat(i)),a=r.scrollHeight;e.classList.add(o),n&&s(e),requestAnimationFrame(function(){requestAnimationFrame(function(){r.style.height=n?"".concat(a,"px"):"auto"})}),this.updateARIA(e,{ariaExpanded:!0,ariaDisabled:!t})},closeElement:function(e,t){var n=!(1<arguments.length&&void 0!==t)||t,s=this.options,i=s.panelClass,t=s.activeClass,s=s.beforeClose,o=e.querySelector(".".concat(i)),r=o.scrollHeight;e.classList.remove(t),n?(s(e),requestAnimationFrame(function(){o.style.height="".concat(r,"px"),requestAnimationFrame(function(){o.style.height=0})}),this.updateARIA(e,{ariaExpanded:!1,ariaDisabled:!1})):o.style.height=0},toggleElement:function(e){var t=this.options,n=t.activeClass,t=t.collapse,n=e.classList.contains(n);if(!n||t)return n?this.closeElement(e):this.showElement(e)},closeElements:function(){var n=this,e=this.options,s=e.activeClass;e.showMultiple||this.elements.map(function(e,t){e.classList.contains(s)&&t!=n.currFocusedIdx&&n.closeElement(e)})},handleClick:function(n){var s=this,i=n.currentTarget;this.elements.map(function(e,t){e.contains(i)&&"A"!==n.target.nodeName&&(s.currFocusedIdx=t,s.closeElements(),s.focus(n,e),s.toggleElement(e))})},handleKeydown:function(e){switch(e.keyCode){case 38:return this.focusPrevElement(e);case 40:return this.focusNextElement(e);case 36:return this.focusFirstElement(e);case 35:return this.focusLastElement(e);default:return null}},handleTransitionEnd:function(e){var t,n,s,i;"height"===e.propertyName&&(t=(i=this.options).onOpen,n=i.onClose,s=e.currentTarget,i=parseInt(s.style.height),e=this.elements.find(function(e){return e.contains(s)}),0<i?(s.style.height="auto",t(e)):n(e))}};this.attachEvents=function(){var e,n,s;t||(e=a.options,n=e.triggerClass,s=e.panelClass,a.handleClick=a.handleClick.bind(a),a.handleKeydown=a.handleKeydown.bind(a),a.handleTransitionEnd=a.handleTransitionEnd.bind(a),a.elements.map(function(e){var t=e.querySelector(".".concat(n)),e=e.querySelector(".".concat(s));t.addEventListener("click",a.handleClick),t.addEventListener("keydown",a.handleKeydown),e.addEventListener("webkitTransitionEnd",a.handleTransitionEnd),e.addEventListener("transitionend",a.handleTransitionEnd)}),t=!0)},this.detachEvents=function(){var e,n,s;t&&(e=a.options,n=e.triggerClass,s=e.panelClass,a.elements.map(function(e){var t=e.querySelector(".".concat(n)),e=e.querySelector(".".concat(s));t.removeEventListener("click",a.handleClick),t.removeEventListener("keydown",a.handleKeydown),e.removeEventListener("webkitTransitionEnd",a.handleTransitionEnd),e.removeEventListener("transitionend",a.handleTransitionEnd)}),t=!1)},this.toggle=function(n){var e=a.elements.find(function(e,t){return t===n});e&&a.toggleElement(e)},this.open=function(n){var e=a.elements.find(function(e,t){return t===n});e&&a.showElement(e)},this.openAll=function(){a.elements.map(function(e){return a.showElement(e,!1)})},this.close=function(n){var e=a.elements.find(function(e,t){return t===n});e&&a.closeElement(e)},this.closeAll=function(){a.elements.map(function(e){return a.closeElement(e,!1)})},this.destroy=function(){e.detachEvents(),e.openAll(),a.elements.map(function(e){a.removeIDs(e),a.removeARIA(e),a.setTransition(e,!0)}),t=!0};var c=function(e){return"string"==typeof document.documentElement.style[e]?e:(e=n(e),"webkit".concat(e))},n=function(e){return e.charAt(0).toUpperCase()+e.slice(1)};a.init()}var l=0;"undefined"!=typeof module&&void 0!==module.exports?module.exports=s:e.Accordion=s}(window);